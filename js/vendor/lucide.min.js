(() => {
    const NS = 'http://www.w3.org/2000/svg';

    const icons = {
        'alert-triangle': [
            { tag: 'path', attrs: { d: 'M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z' } },
            { tag: 'line', attrs: { x1: 12, y1: 9, x2: 12, y2: 13 } },
            { tag: 'line', attrs: { x1: 12, y1: 17, x2: 12.01, y2: 17 } }
        ],
        'arrow-left': [
            { tag: 'line', attrs: { x1: 19, y1: 12, x2: 5, y2: 12 } },
            { tag: 'polyline', attrs: { points: '12 19 5 12 12 5' } }
        ],
        'arrow-right': [
            { tag: 'line', attrs: { x1: 5, y1: 12, x2: 19, y2: 12 } },
            { tag: 'polyline', attrs: { points: '12 5 19 12 12 19' } }
        ],
        'arrow-up-right': [
            { tag: 'line', attrs: { x1: 7, y1: 17, x2: 17, y2: 7 } },
            { tag: 'polyline', attrs: { points: '7 7 17 7 17 17' } }
        ],
        'calendar-check': [
            { tag: 'rect', attrs: { x: 3, y: 4, width: 18, height: 18, rx: 2, ry: 2 } },
            { tag: 'line', attrs: { x1: 3, y1: 10, x2: 21, y2: 10 } },
            { tag: 'line', attrs: { x1: 8, y1: 2, x2: 8, y2: 6 } },
            { tag: 'line', attrs: { x1: 16, y1: 2, x2: 16, y2: 6 } },
            { tag: 'polyline', attrs: { points: '9 14 11 16 15 12' } }
        ],
        check: [
            { tag: 'polyline', attrs: { points: '20 6 9 17 4 12' } }
        ],
        'chevron-down': [
            { tag: 'polyline', attrs: { points: '6 9 12 15 18 9' } }
        ],
        clock: [
            { tag: 'circle', attrs: { cx: 12, cy: 12, r: 9 } },
            { tag: 'polyline', attrs: { points: '12 7 12 12 16 14' } }
        ],
        copy: [
            { tag: 'rect', attrs: { x: 9, y: 9, width: 11, height: 11, rx: 2 } },
            { tag: 'path', attrs: { d: 'M5 15H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h8' } }
        ],
        globe: [
            { tag: 'circle', attrs: { cx: 12, cy: 12, r: 9 } },
            { tag: 'path', attrs: { d: 'M3.5 9h17' } },
            { tag: 'path', attrs: { d: 'M3.5 15h17' } },
            { tag: 'path', attrs: { d: 'M12 3a15 15 0 0 0 0 18' } },
            { tag: 'path', attrs: { d: 'M12 3a15 15 0 0 1 0 18' } }
        ],
        info: [
            { tag: 'circle', attrs: { cx: 12, cy: 12, r: 10 } },
            { tag: 'path', attrs: { d: 'M12 16v-4' } },
            { tag: 'path', attrs: { d: 'M12 8h.01' } }
        ],
        'clipboard-list': [
            { tag: 'rect', attrs: { width: 8, height: 4, x: 8, y: 2, rx: 1, ry: 1 } },
            { tag: 'path', attrs: { d: 'M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2' } },
            { tag: 'path', attrs: { d: 'M12 11h4' } },
            { tag: 'path', attrs: { d: 'M12 16h4' } },
            { tag: 'path', attrs: { d: 'M8 11h.01' } },
            { tag: 'path', attrs: { d: 'M8 16h.01' } }
        ],
        heart: [
            { tag: 'path', attrs: { d: 'M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8Z' } }
        ],
        'map-pin': [
            { tag: 'path', attrs: { d: 'M21 10c0 6-9 12-9 12S3 16 3 10a9 9 0 1 1 18 0Z' } },
            { tag: 'circle', attrs: { cx: 12, cy: 10, r: 3 } }
        ],
        mountain: [
            { tag: 'path', attrs: { d: 'M3 17h18l-6-10-3 5-2-3-7 8Z' } }
        ],
        plane: [
            { tag: 'path', attrs: { d: 'm17.5 19-5.5-5.5L5 16l2.5-6L3 9l9-6 2.5 7L21 9z' } }
        ],
        play: [
            { tag: 'polygon', attrs: { points: '6 4 20 12 6 20 6 4' } }
        ],
        quote: [
            { tag: 'path', attrs: { d: 'M10 8H6a2 2 0 0 0-2 2v6h4v-4h2V8Z' } },
            { tag: 'path', attrs: { d: 'M20 8h-4a2 2 0 0 0-2 2v6h4v-4h2V8Z' } }
        ],
        search: [
            { tag: 'circle', attrs: { cx: 11, cy: 11, r: 7 } },
            { tag: 'line', attrs: { x1: 21, y1: 21, x2: 16.65, y2: 16.65 } }
        ],
        'search-x': [
            { tag: 'circle', attrs: { cx: 11, cy: 11, r: 7 } },
            { tag: 'line', attrs: { x1: 21, y1: 21, x2: 16.65, y2: 16.65 } },
            { tag: 'line', attrs: { x1: 13.5, y1: 8.5, x2: 8.5, y2: 13.5 } },
            { tag: 'line', attrs: { x1: 8.5, y1: 8.5, x2: 13.5, y2: 13.5 } }
        ],
        shield: [
            { tag: 'path', attrs: { d: 'M12 3 5 6v5c0 5 3.5 8.5 7 9 3.5-.5 7-4 7-9V6Z' } }
        ],
        'shield-alert': [
            { tag: 'path', attrs: { d: 'M12 3 5 6v5c0 5 3.5 8.5 7 9 3.5-.5 7-4 7-9V6Z' } },
            { tag: 'line', attrs: { x1: 12, y1: 9, x2: 12, y2: 13 } },
            { tag: 'line', attrs: { x1: 12, y1: 17, x2: 12.01, y2: 17 } }
        ],
        'shield-check': [
            { tag: 'path', attrs: { d: 'M12 3 5 6v5c0 5 3.5 8.5 7 9 3.5-.5 7-4 7-9V6Z' } },
            { tag: 'polyline', attrs: { points: '9 12 12 15 16 10' } }
        ],
        user: [
            { tag: 'circle', attrs: { cx: 12, cy: 7, r: 4 } },
            { tag: 'path', attrs: { d: 'M5.5 21a6.5 6.5 0 0 1 13 0' } }
        ],
        users: [
            { tag: 'path', attrs: { d: 'M17 21v-2a4 4 0 0 0-4-4h-2a4 4 0 0 0-4 4v2' } },
            { tag: 'circle', attrs: { cx: 9, cy: 7, r: 4 } },
            { tag: 'path', attrs: { d: 'M22 21v-2a4 4 0 0 0-3-3.87' } },
            { tag: 'path', attrs: { d: 'M16 3.13a4 4 0 0 1 0 7.75' } }
        ],
        x: [
            { tag: 'line', attrs: { x1: 18, y1: 6, x2: 6, y2: 18 } },
            { tag: 'line', attrs: { x1: 6, y1: 6, x2: 18, y2: 18 } }
        ],
        default: [
            { tag: 'circle', attrs: { cx: 12, cy: 12, r: 9 } },
            { tag: 'line', attrs: { x1: 8, y1: 8, x2: 16, y2: 16 } },
            { tag: 'line', attrs: { x1: 16, y1: 8, x2: 8, y2: 16 } }
        ]
    };

    function createElement(tag, attrs = {}) {
        const el = document.createElementNS(NS, tag);
        Object.entries(attrs).forEach(([key, value]) => {
            el.setAttribute(key, String(value));
        });
        return el;
    }

    function buildIcon(name, className, style) {
        const iconParts = icons[name] || icons.default;
        const svg = createElement('svg', {
            xmlns: NS,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            'stroke-width': 2,
            'stroke-linecap': 'round',
            'stroke-linejoin': 'round',
            'aria-hidden': 'true',
            'data-lucide': name
        });

        if (className) svg.setAttribute('class', className);
        if (style) svg.setAttribute('style', style);

        iconParts.forEach(part => {
            const node = createElement(part.tag, part.attrs);
            svg.appendChild(node);
        });

        return svg;
    }

    function createIcons(selector = '[data-lucide]') {
        const nodes = typeof selector === 'string'
            ? document.querySelectorAll(selector)
            : selector;

        nodes.forEach(node => {
            if (!node || !node.getAttribute) return;
            const name = (node.getAttribute('data-lucide') || '').trim();
            if (!name) return;
            const svg = buildIcon(name, node.getAttribute('class'), node.getAttribute('style'));
            node.replaceWith(svg);
        });
    }

    window.lucide = Object.assign(window.lucide || {}, { createIcons });
})();
